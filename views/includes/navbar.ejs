
<!-- START: Improved Navbar (replace your old navbar) -->
<!-- <style>
/* ---------- Variables ---------- */
:root{
  --brand: #002455;
  --accent: #0b63dd;
  --muted: #7a8694;
  --bg: #ffffff;
  --card: #ffffff;
  --text: #0f1724;
  --border: #e6e6e6;
  --radius: 10px;
}

/* dark variables */
body.dark-mode{
  --bg: #0b1220;
  --card: #07203a;
  --text: #eaf2ff;
  --muted: #98a6bf;
  --border: #12314b;
}

/* ---------- Reset & base ---------- */
*{box-sizing:border-box}
a{color:inherit;text-decoration:none}
button{cursor:pointer}

/* ---------- Main header ---------- */
.mt-header{
  position:fixed;
  top:0;
  left:0;
  right:0;
  height:64px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 20px;
  gap:16px;
  background:var(--card);
  border-bottom:1px solid var(--border);
  z-index:1100;
  transition:background .25s, color .25s;
  box-shadow:0 2px 8px rgba(2,6,23,0.06);
}

/* logo */
.logo{
  display:flex;
  align-items:center;
  gap:10px;
  font-weight:700;
  font-size:20px;
  color:var(--brand);
  letter-spacing:0.6px;
  white-space:nowrap;
}

/* left / center / right groups */
.header-left, .header-center, .header-right{
  display:flex;
  align-items:center;
  gap:18px;
}

/* center nav (desktop) */
.nav-desktop{
  display:flex;
  gap:28px;
  align-items:center;
}
.nav-desktop a{
  color:var(--text);
  font-weight:500;
  font-size:15px;
  padding:6px 8px;
  border-radius:6px;
  transition:color .15s, background .15s;
}
.nav-desktop a:hover{ color:var(--brand); background: rgba(3,57,99,0.04) }

/* search */
.search-wrapper{ position:relative; width:260px; }
.inp-search{
  width:100%;
  padding:9px 14px;
  border-radius:999px;
  border:1px solid var(--border);
  background:var(--bg);
  color:var(--text);
  font-size:14px;
  transition:border-color .15s, background .15s;
}
.inp-search:focus{ outline:none; border-color:var(--brand); box-shadow:0 4px 18px rgba(2,6,23,0.06) }

.suggestions{
  position:absolute;
  left:0; right:0;
  top:110%;
  background:var(--card);
  border:1px solid var(--border);
  border-radius:8px;
  box-shadow:0 6px 18px rgba(2,6,23,0.08);
  max-height:240px; overflow:auto;
  display:none;
  z-index:1200;
}
.suggestion-item{ padding:10px 12px; color:var(--text); cursor:pointer }
.suggestion-item:hover{ background: rgba(3,57,99,0.04) }

/* auth buttons */
.header-buttons{ display:flex; gap:10px; align-items:center }
.create-btn{
  padding:8px 14px; border-radius:8px; background:var(--brand);
  color:white; font-weight:600; font-size:14px; border:none;
  box-shadow:0 4px 12px rgba(2,6,23,0.06);
}
.auth-btn{
  padding:7px 12px; border-radius:8px; background:transparent;
  border:1px solid var(--border); color:var(--text); font-weight:600;
}

/* dark toggle */
.dark-toggle{
  background:transparent; border:none; font-size:18px; color:var(--text)
}

/* hamburger - mobile */
.hamburger{ display:none; font-size:26px; background:transparent; border:none; color:var(--text) }

/* second navbar (sticky under main) */
.second-navbar{
  position:sticky;
  top:64px;
  z-index:1099;
  display:flex;
  justify-content:center;
  gap:28px;
  padding:10px 20px;
  background:var(--card);
  border-bottom:1px solid var(--border);
  transition:background .25s;
}
.second-navbar a{ color:var(--text); font-weight:600; font-size:15px }
.second-navbar a:hover{ color:var(--brand) }

/* ---------- responsive rules ---------- */
@media (max-width: 900px){
  .nav-desktop{ display:none }
  .search-wrapper{ display:none }
  .hamburger{ display:block }
  .header-center{display:none}
  .logo{font-size:18px}
}

/* mobile menu panel */
.mobile-menu{
  display:none;
  position:fixed;
  top:64px; left:0; right:0;
  background:var(--card);
  border-top:1px solid var(--border);
  z-index:1098;
  padding:18px;
  box-shadow:0 6px 20px rgba(2,6,23,0.06);
} -->


<!-- 
</style>

<header class="mt-header">

    <div class="logo">ENGGNOTESCLUB</div>

    <div class="hamburger" onclick="toggleMobile()">â˜°</div>

    <nav class="nav-desktop">
        <a href="/home">Platform</a>
        <a href="/notes/new">ðŸ“‘ Create Notes</a>

        <div class="search-wrapper">
            <input type="text" id="searchBoxDesktop" class="inp-search" placeholder="Search notes...">
            <div id="suggestionsDesktop" class="suggestions"></div>
        </div>

        <div class="header-buttons">
            <% if (!currUser) { %>
                <a class="create-btn" href="/signup">Sign Up</a>
                <a class="create-btn" href="/login">Log In</a>
            <% } %>
            <% if (currUser) { %>
                <a class="create-btn" href="/logout">Log Out</a>
            <% } %>
        </div>

        

    </nav>
</header>

<div id="mobileMenu" class="mobile-menu">
    <a href="/home">Platform</a>
    <a href="/notes/new">ðŸ“‘ Create Notes</a>

    <input type="text" id="searchBoxMobile" class="inp-search" placeholder="Search notes...">
    <div id="suggestionsMobile" class="suggestions"></div>

    <% if (!currUser) { %>
        <a href="/signup">Sign Up</a>
        <a href="/login">Log In</a>
    <% } %>

    <% if (currUser) { %>
        <a href="/logout">Log Out</a>
    <% } %>
</div>
 -->




<!-- <script>
/* ---------- Toggle mobile menu ---------- */
function toggleMobile(){
  const panel = document.getElementById("mobileMenu");
  const isShown = panel.classList.toggle("show");
  panel.setAttribute("aria-hidden", !isShown);
}
</script> -->


















<!-- START: Improved Navbar -->
<style>
:root{
  --brand:#002455; --accent:#0b63dd;
  --muted:#7a8694; --bg:#fff; --card:#fff;
  --text:#0f1724; --border:#e6e6e6; --radius:10px;
}

/* dark mode */
body.dark-mode{
  --bg:#0b1220; --card:#07203a; --text:#eaf2ff;
  --muted:#98a6bf; --border:#12314b;
}

/* reset */
*{ box-sizing:border-box; }
a{ color:inherit; text-decoration:none; }
button{ cursor:pointer; }

/* main header */
.mt-header{
  position:fixed; top:0; left:0; right:0;
  height:64px;
  display:flex; align-items:center; justify-content:space-between;
  padding:0 20px; gap:16px;
  background:var(--card);
  border-bottom:1px solid var(--border);
  box-shadow:0 2px 8px rgba(2,6,23,0.06);
  z-index:1100;
}

/* logo */
.logo{ font-size:20px; font-weight:700; color:var(--brand); }

/* desktop nav */
.nav-desktop{ display:flex; align-items:center; gap:28px; }
.nav-desktop a{
  font-weight:500; font-size:15px; padding:6px 8px; border-radius:6px;
}
.nav-desktop a:hover{ background:rgba(3,57,99,0.05); }

/* search */
.search-wrapper{ position:relative; width:260px; }
.inp-search{
  width:100%; padding:9px 14px; border-radius:999px;
  border:1px solid var(--border); background:var(--bg); color:var(--text);
}
.suggestions{
  position:absolute; top:110%; left:0; right:0;
  background:var(--card);
  border:1px solid var(--border);
  border-radius:8px;
  display:none;
  max-height:240px; overflow:auto;
  z-index:1200;
}
.suggestion-item{ padding:10px 12px; cursor:pointer; }
.suggestion-item:hover{ background:rgba(3,57,99,0.05); }

/* auth */
.create-btn{
  padding:8px 14px; border-radius:8px; background:var(--brand);
  color:white; font-weight:600;
}

/* hamburger */
.hamburger{
  display:none; font-size:28px; border:none; background:none; color:var(--text);
}

/* mobile menu FIXED */
.mobile-menu{
  display:none;
  position:fixed;
  top:64px; left:0; right:0;
  background:var(--card);
  border-top:1px solid var(--border);
  padding:18px;
  box-shadow:0 6px 20px rgba(2,6,23,0.06);
  z-index:1099;
  flex-direction:column;
  gap:14px;
}
.mobile-menu.show{ display:flex; }

/* responsive */
@media(max-width:900px){
  .nav-desktop{ display:none; }
  .hamburger{ display:block; }
}
</style>

<header class="mt-header">

  <div class="logo">ENGGNOTESCLUB</div>

  <button class="hamburger" onclick="toggleMobile()">â˜°</button>

  <nav class="nav-desktop">
    <a href="/about">About</a>
    <a href="/home">Platform</a>
    <a href="/notes/new">ðŸ“‘ Create Notes</a>

      <div class="search-wrapper">
          <input id="searchBoxDesktop" class="inp-search" placeholder="Search notes...">
          <div id="suggestionsDesktop" class="suggestions"></div>
      </div>

      <div class="header-buttons">
          <% if (!currUser) { %>
              <a class="create-btn" href="/signup">Sign Up</a>
              <a class="create-btn" href="/login">Log In</a>
          <% } else { %>
              <a class="create-btn" href="/logout">Log Out</a>
          <% } %>
      </div>

<li class="nav-item">
    <a class="nav-link" href="/ai/tools">AI Tools âš¡</a>
</li>





  </nav>











  

</header>

<div id="mobileMenu" class="mobile-menu">
  <a href="/about">About</a>
  <a href="/home">Platform</a>
  <a href="/notes/new">ðŸ“‘ Create Notes</a>

  <input id="searchBoxMobile" class="inp-search" placeholder="Search notes...">
  <div id="suggestionsMobile" class="suggestions"></div>

  <% if (!currUser) { %>
      <a href="/signup">Sign Up</a>
      <a href="/login">Log In</a>
  <% } else { %>
      <a href="/logout">Log Out</a>
  <% } %>
</div>



<script>
/* mobile menu toggle */
function toggleMobile(){
  document.getElementById("mobileMenu").classList.toggle("show");
}

/* ----------- SEARCH AUTO SUGGEST ----------- */
/* Works for BOTH desktop & mobile */
async function handleSearch(inputId, suggestionId){
  const box = document.getElementById(inputId);
  const sug = document.getElementById(suggestionId);

  box.addEventListener("input", async () => {
    const q = box.value.trim();
    if(!q){
      sug.style.display = "none";
      return;
    }

    // call backend route
    const res = await fetch(`/search?q=${q}`);
    const data = await res.json();

    sug.innerHTML = "";
    if(data.length === 0){
      sug.style.display = "none";
      return;
    }

    data.forEach(item=>{
      const div = document.createElement("div");
      div.className = "suggestion-item";
      div.textContent = item.title;
      div.onclick = ()=> window.location.href = `/notes/${item._id}`;
      sug.appendChild(div);
    });

    sug.style.display = "block";
  });
}

handleSearch("searchBoxDesktop","suggestionsDesktop");
handleSearch("searchBoxMobile","suggestionsMobile");






function handleSearch(event) {
    if (event.key === "Enter") {
        const q = event.target.value.trim();
        if (q.length > 0) {
            window.location.href = `/search/results?q=${encodeURIComponent(q)}`;
        }
    }
}

document.getElementById("searchBoxDesktop")?.addEventListener("keydown", handleSearch);
document.getElementById("searchBoxMobile")?.addEventListener("keydown", handleSearch);

</script>
